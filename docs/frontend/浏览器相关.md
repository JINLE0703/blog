---
title: 浏览器相关
lang: zh-CN
---

## 页面加载过程

#### 从输入 url 到渲染出页面的整个过程

- 加载过程： 
  - DNS解析 ：把域名变成 IP 地址，大型网站不同地区 IP 地址是不一样的
  - 浏览器根据 IP 地址向服务器发起 http 请求 （包括三次握手）
  - 服务器处理 http 请求，并返回给浏览器
- 渲染过程：
  - 浏览器根据 HTML 代码生成 DOM 树
  - 浏览器根据 css 代码生成 CSSOM
  - 将 DOM 树和 CSSOM 整合形成 Render 树（渲染树），只有 DOM 树是无法渲染的，因为有些标签的 css 属性是在 CSSOM 中
  - 浏览器根据 render 树渲染页面
  - 如果遇到 `<script>` 则暂停渲染，优先加载并执行 JS 代码，完成在继续。因为 JS 进程和渲染进程共用一个线程，JS 有可能改变DOM 结构，如果JS代码改变了 DOM 结构，那么如果提前渲染的 DOM 结构将是不正确的
  - 直至 render 树渲染完成

#### window.onload/DOMContentLoaded

`window.onload`：资源全部加载完成才能执行，包括图片

`DOMContentLoaded`：DOM 渲染完成即可，图片可能尚未下载

## 存储

#### cookie

- 可以用来当做本地存储
- 浏览器和服务器端的通信

缺点：

- 存储大小，最大4kb
- http 请求时需要发送到服务端，增加请求数据量
- 只能用 document.cookie = '...' 来修改，太过简陋

#### localStorage

#### sessionStorage