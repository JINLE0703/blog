---
title: 操作系统
lang: zh-CN
---

## 相关概念

### 并发性

并发是指两个或多个事件可以在 **同一个时间间隔（一段时间内）**发生

并行是指两个或多个事件可以在 **同一个时刻** 发生

### 共享性

操作系统中的资源可供多个并发的程序共同使用，这种形式称为 **资源共享**

- 互斥共享 --- 当资源被程序 A 占用时，其他想使用的话只能等待，只有进程 A 使用完以后，其他进程才可以使用该资源（如：打印机）

- 同时访问 --- 某种资源在一段时间内 **并发地** 被多个程序访问

### 虚拟性

把一个 **物理实体** 转变为若干个 **逻辑实体**

- 时分复用技术 --- 资源在时间上进行复用，不同程序并发使用
- 空分复用技术 --- 空分复用技术用来实现虚拟磁盘、虚拟内存等

### 异步性

在多道程序环境下，允许多个进程并发执行

## 进程管理

### 进程与线程

进程 --- 系统进行 **资源分配和调度** 的 **基本** 单位，作为程序独立运行的载体保障程序正常执行，使得操作系统资源的利用率大幅提升

线程 --- 系统进行 **运行调度** 的 **最小** 单位，包含在进程之中，是进程中实际运行工作的单位

**一个进程可以有多个线程**

**进程的线程共享进程资源**

**操作系统对进程的调度实际上是进程对线程的调度**

### 进程同步

对竞争资源在多进程间进行使用次序的协调，使得并发执行的多个进程之间可以有效使用资源和相互合作

- 空闲让进：资源无占用，允许使用
- 忙则等待：资源有占用，请求进程等待
- 有限等待：保证有限等待时间能够使用资源
- 让权等待：等待时，进程需要让出 CPU

**进程内多线程也需要同步**

## 作业管理

### 进程调度

指计算机通过决策决定哪个就绪进程可以获得 CPU 使用权

1. 保留旧进程的运行信息，请出旧进程（收拾包袱）
2. 选择新进程，准备运行环境并分配 CPU（新进驻）

#### 机制

**就绪队列的排队机制** --- 将就绪进程按照一定的方式排成队列，以便调度程序可以最快找到就绪进程

**选择运行进程的委派机制** --- 调度程序以一定的策略选择就绪进程，将 CPU 资源分配给它

**新老进程的上下文切换机制** --- 保存当前进程的上下文信息，装入被委派执行进程的运行上下文

#### 非抢占式调度

处理器一旦分配给某个进程，就让该进程一直使用下去

调度程序不以任何原因抢占正在被使用的处理器

直到进程完成工作或因为 IO 阻塞才会让出处理器

#### 抢占式调度

允许调度程序以一定的策略暂停当前运行的进程

保存好旧进程的上下文信息，分配处理器给新进程

#### 相关算法

**先来先服务调度算法**

**短进程优先调度算法** --- 调度程序优先选择就绪队列中估计运行时间最短的进程

**高优先权优先调度算法** --- 进程附带优先权，调度程序优先选择权重高的进程

**时间片轮转调度算法** --- 每次从队列头部取出待执行进程，分配一个时间片执行，时间执行完进程进入就绪进程尾部

### 死锁

死锁是指两个或两个以上的进程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象，若无外力作用，它们都将无法推进下去。

此时称系统处于死锁状态或系统产生了死锁，这些永远在互相等待的进程称为死锁进程。

#### 预防

1. 系统规定进程运行之前，一次性申请所有需要的资源，进程在运行期间不会提出资源请求，从而摒弃请求保持条件
2. 当一个进程请求新的资源得不到满足时，必须释放占有的资源，进程运行时占有的资源可以被释放，从而摈弃不可剥夺条件
3. 可用资源线性排序，申请必须按照需要递增申请，线性申请不再形成环路，从而摒弃环路等待条件
4. 银行家算法